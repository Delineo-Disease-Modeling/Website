{"ast":null,"code":"import map from \"./map\";\nexport default function () {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function (values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array,\n        sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {\n      array.push({\n        key: k,\n        values: entries(v, depth)\n      });\n    });\n    return sortKey != null ? array.sort(function (a, b) {\n      return sortKey(a.key, b.key);\n    }) : array;\n  }\n\n  return nest = {\n    object: function (array) {\n      return apply(array, 0, createObject, setObject);\n    },\n    map: function (array) {\n      return apply(array, 0, createMap, setMap);\n    },\n    entries: function (array) {\n      return entries(apply(array, 0, createMap, setMap), 0);\n    },\n    key: function (d) {\n      keys.push(d);\n      return nest;\n    },\n    sortKeys: function (order) {\n      sortKeys[keys.length - 1] = order;\n      return nest;\n    },\n    sortValues: function (order) {\n      sortValues = order;\n      return nest;\n    },\n    rollup: function (f) {\n      rollup = f;\n      return nest;\n    }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}","map":{"version":3,"sources":["C:/Users/totti/Documents/jhu class/delineo/Website/model_app/frontend/node_modules/d3-collection/src/nest.js"],"names":["map","keys","sortKeys","sortValues","rollup","nest","apply","array","depth","createResult","setResult","length","sort","i","n","key","keyValue","value","valuesByKey","values","result","get","push","set","each","entries","sortKey","v","k","a","b","object","createObject","setObject","createMap","setMap","d","order","f"],"mappings":"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","sourcesContent":["import map from \"./map\";\r\n\r\nexport default function() {\r\n  var keys = [],\r\n      sortKeys = [],\r\n      sortValues,\r\n      rollup,\r\n      nest;\r\n\r\n  function apply(array, depth, createResult, setResult) {\r\n    if (depth >= keys.length) {\r\n      if (sortValues != null) array.sort(sortValues);\r\n      return rollup != null ? rollup(array) : array;\r\n    }\r\n\r\n    var i = -1,\r\n        n = array.length,\r\n        key = keys[depth++],\r\n        keyValue,\r\n        value,\r\n        valuesByKey = map(),\r\n        values,\r\n        result = createResult();\r\n\r\n    while (++i < n) {\r\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\r\n        values.push(value);\r\n      } else {\r\n        valuesByKey.set(keyValue, [value]);\r\n      }\r\n    }\r\n\r\n    valuesByKey.each(function(values, key) {\r\n      setResult(result, key, apply(values, depth, createResult, setResult));\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  function entries(map, depth) {\r\n    if (++depth > keys.length) return map;\r\n    var array, sortKey = sortKeys[depth - 1];\r\n    if (rollup != null && depth >= keys.length) array = map.entries();\r\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\r\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\r\n  }\r\n\r\n  return nest = {\r\n    object: function(array) { return apply(array, 0, createObject, setObject); },\r\n    map: function(array) { return apply(array, 0, createMap, setMap); },\r\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\r\n    key: function(d) { keys.push(d); return nest; },\r\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\r\n    sortValues: function(order) { sortValues = order; return nest; },\r\n    rollup: function(f) { rollup = f; return nest; }\r\n  };\r\n}\r\n\r\nfunction createObject() {\r\n  return {};\r\n}\r\n\r\nfunction setObject(object, key, value) {\r\n  object[key] = value;\r\n}\r\n\r\nfunction createMap() {\r\n  return map();\r\n}\r\n\r\nfunction setMap(map, key, value) {\r\n  map.set(key, value);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}